package main

import "fmt"

//Разработать конвейер чисел. Даны два канала: в первый пишутся числа x из массива,
//во второй – результат операции x*2. После этого данные из второго канала должны выводиться в stdout.
//То есть, организуйте конвейер из двух этапов с горутинами: генерация чисел и их обработка.
//Убедитесь, что чтение из второго канала корректно завершается.

func main() {
	// Создаём первый канал для передачи исходных чисел
	ch1 := make(chan int)
	// Создаём второй канал для передачи обработанных чисел
	ch2 := make(chan int)

	// Исходный массив чисел
	arr := []int{1, 2, 3, 4, 5}

	// Первая горутина для генерации чисел
	go func() {
		// Проходим по всем элементам массива
		for _, v := range arr {
			// Отправляем элемент массива в первый канал
			ch1 <- v
		}
		// Закрываем первый канал после записи всех чисел
		close(ch1)
	}()

	// Вторая горутина для обработки чисел
	go func() {
		// Читаем числа из первого канала
		for v := range ch1 {
			// Умножаем число на 2 и записываем во второй канал
			ch2 <- v * 2
		}
		// Закрываем второй канал после завершения обработки
		close(ch2)
	}()

	// Читаем результаты из второго канала
	for v := range ch2 {
		// Печатаем результат в stdout
		fmt.Println(v)
	}
}
